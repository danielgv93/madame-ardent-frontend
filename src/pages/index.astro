---
import Layout from '../layouts/Layout.astro';

const res1 = await fetch("http://localhost:4321/api/forms")
const forms = await res1.json();
---

<Layout >
    <div>{forms[0]?.message}</div>
    <div id="users"></div>
</Layout>

<script>
import { authenticatedFetch } from "../lib/client-api";

async function loadUsers() {
    try {
        const res = await authenticatedFetch("http://localhost:4321/api/users");
        const users = await res.json();
        document.getElementById('users').textContent = users[0]?.name;
    } catch (error) {
        console.error('Error loading users:', error);
    }
}

loadUsers();
</script>
